(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,,,,,,function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(9),r=n.n(s),i=n(1),a=n.n(i),o=n(5),j=n(4),d=n(2);n(8),n(15);function l(e){return Object(c.jsx)("header",{children:Object(c.jsxs)("div",{className:"header__container",children:[Object(c.jsx)("h1",{children:"Web Dev Final Project"}),Object(c.jsx)("nav",{className:"header__nav",children:Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:Object(c.jsx)(o.b,{to:"/",children:"Home"})}),!e.loggedIn&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("li",{children:Object(c.jsx)(o.b,{to:"/register",children:"Register"})})," ",Object(c.jsx)("li",{children:Object(c.jsx)(o.b,{to:"/login",children:"Login"})})]}),e.loggedIn&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("li",{children:Object(c.jsx)(o.b,{to:"/dashboard",children:"Dashboard"})}),Object(c.jsx)("li",{onClick:function(t){fetch("/api/user/session/remove",{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-cache"},credentials:"same-origin"}).then((function(e){return e.json().then((function(t){return{status:e.status,body:t}}))})).then((function(t){200===t.status&&e.setLoggedIn(!1)}))},children:Object(c.jsx)(o.b,{to:"/login",children:"Logout"})})]})]})})]})})}function h(e){return Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"Home (Public)"})})}n(16),n(17);function b(e){var t=Object(i.useState)([]),n=Object(j.a)(t,2),s=n[0],r=n[1],a=Object(i.useState)([]),o=Object(j.a)(a,2),d=o[0],l=o[1],h=Object(i.useState)([]),b=Object(j.a)(h,2),u=b[0],O=b[1],p=Object(i.useState)(!0),x=Object(j.a)(p,2),g=x[0],m=x[1];Object(i.useEffect)((function(){var e=!0;return navigator.geolocation.getCurrentPosition((function(e){r(e.coords.latitude),l(e.coords.longitude)})),fetch("https://api.openweathermap.org/data/2.5/weather/?lat=".concat(s,"&lon=").concat(d,"&units=metric&APPID=ed987e2716aae4a47523c9fb7aeb9abb")).then((function(e){return e.json()})).then((function(t){"400"!==t.cod&&"429"!==t.cod&&e&&(m(!1),O(t))})),function(){e=!1}}),[s,d]);return Object(c.jsx)(c.Fragment,{children:!0===g?Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"Click here to refresh. (Doesn't work yet)"})}):Object(c.jsx)("div",{className:"weather",children:"undefined"!==typeof u.main?Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"weather-city",children:[u.name,Object(c.jsx)("button",{className:"weather-refresh",onClick:function(e){e.preventDefault(),navigator.geolocation.getCurrentPosition((function(e){r(e.coords.latitude),l(e.coords.longitude)})),fetch("https://api.openweathermap.org/data/2.5/weather/?lat=".concat(s,"&lon=").concat(d,"&units=metric&APPID=ed987e2716aae4a47523c9fb7aeb9abb")).then((function(e){return e.json()})).then((function(e){"400"!==e.cod&&"429"!==e.cod&&(m(!1),O(e))}))},children:"Refresh"})]}),Object(c.jsxs)("div",{className:"weather-content",children:[Object(c.jsx)("p",{children:new Date(Date.now()).toDateString()}),Object(c.jsx)("p",{children:u.weather[0].description.charAt(0).toUpperCase()+u.weather[0].description.slice(1)})]}),Object(c.jsxs)("div",{className:"weather-content",children:[Object(c.jsxs)("p",{children:["Temprature: ",u.main.temp]}),Object(c.jsxs)("p",{children:["Humidity: ",u.main.humidity]})]}),Object(c.jsxs)("div",{className:"weather-content",children:[Object(c.jsxs)("p",{children:["Sunrise:"," ",new Date(1e3*u.sys.sunrise).toLocaleTimeString("en-US")]}),Object(c.jsxs)("p",{children:["Sunset:"," ",new Date(1e3*u.sys.sunset).toLocaleTimeString("en-US")]})]})]}):Object(c.jsx)("div",{style:{padding:"20px 20px"},children:Object(c.jsx)("h4",{children:"Fetching local weather data..."})})})})}function u(e){return Object(c.jsxs)("div",{className:"dashboard",children:[Object(c.jsx)("article",{children:Object(c.jsx)("div",{className:"dashboard-weather",children:Object(c.jsx)(b,{})})}),Object(c.jsx)("article",{children:Object(c.jsx)("div",{className:"dashboard-todo-list"})})]})}n(18);function O(e){var t=Object(d.g)();return Object(c.jsx)("div",{className:"login",children:Object(c.jsx)("form",{onSubmit:function(n){n.preventDefault();var c=new FormData(n.currentTarget),s=c.get("email"),r=c.get("password");fetch("/api/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:r})}).then((function(e){return e.json().then((function(t){return{status:e.status,body:t}}))})).then((function(n){200===n.status&&(e.setLoggedIn(!0),t("/dashboard"))}))},children:Object(c.jsxs)("div",{className:"login-container",children:[Object(c.jsx)("h1",{children:Object(c.jsx)("span",{children:"Login"})}),Object(c.jsx)("p",{children:"Fill in the below form to login."}),Object(c.jsxs)("div",{className:"login-input",children:[Object(c.jsx)("label",{for:"email",children:Object(c.jsx)("b",{children:"Email"})}),Object(c.jsx)("input",{type:"text",placeholder:"Enter Email",name:"email",id:"email",required:!0}),Object(c.jsx)("label",{for:"password",children:Object(c.jsx)("b",{children:"Password"})}),Object(c.jsx)("input",{type:"password",placeholder:"Enter Password",name:"password",id:"password",required:!0}),Object(c.jsx)("button",{type:"submit",class:"loginbtn",children:"Login"})]})]})})})}n(19);function p(e){var t=Object(d.g)();return Object(c.jsx)("div",{className:"register",children:Object(c.jsx)("form",{onSubmit:function(e){e.preventDefault();var n=new FormData(e.currentTarget),c=n.get("email"),s=n.get("password");s!==n.get("confirm-password")?alert("Passwords do not match!"):fetch("/api/user/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,password:s})}).then((function(e){return e.json().then((function(t){return{status:e.status,body:t}}))})).then((function(e){200===e.status?(alert("Account created!"),t("/login")):401===e.status&&alert("Email taken.")}))},children:Object(c.jsxs)("div",{className:"register-container",children:[Object(c.jsx)("h1",{children:Object(c.jsx)("span",{children:"Register"})}),Object(c.jsx)("p",{children:"Fill in the below form to register."}),Object(c.jsxs)("div",{className:"register-input",children:[Object(c.jsx)("label",{for:"email",children:Object(c.jsx)("b",{children:"Email"})}),Object(c.jsx)("input",{type:"text",placeholder:"Enter Email",name:"email",id:"email",required:!0}),Object(c.jsx)("label",{for:"password",children:Object(c.jsx)("b",{children:"Password"})}),Object(c.jsx)("input",{type:"password",placeholder:"Enter Password",name:"password",id:"password",required:!0}),Object(c.jsx)("label",{for:"confirm-password",children:Object(c.jsx)("b",{children:"Confirm Password"})}),Object(c.jsx)("input",{type:"password",placeholder:"Confirm Password",name:"confirm-password",id:"confirm-password",required:!0}),Object(c.jsx)("button",{type:"submit",class:"registerbtn",children:"Register"})]})]})})})}function x(e){var t=e.children,n=e.loggedIn,s=Object(d.f)();return n?t:Object(c.jsx)(d.a,{to:"/login",replace:!0,state:{path:s.pathname}})}function g(){var e=Object(i.useState)(!0),t=Object(j.a)(e,2),n=t[0],s=t[1],r=Object(i.useState)(!1),o=Object(j.a)(r,2),b=o[0],g=o[1];return Object(i.useEffect)((function(){fetch("/api/user/session",{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-cache"},credentials:"same-origin"}).then((function(e){return e.json().then((function(t){return{status:e.status,body:t}}))})).then((function(e){200===e.status?(g(!0),s(!n)):s(!n)}))}),[]),Object(c.jsx)(a.a.Fragment,{children:n?Object(c.jsx)(c.Fragment,{}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(l,{loggedIn:b,setLoggedIn:g}),Object(c.jsxs)(d.d,{children:[Object(c.jsx)(d.b,{path:"/",element:Object(c.jsx)(h,{})}),Object(c.jsx)(d.b,{path:"/login",element:Object(c.jsx)(O,{loggedIn:b,setLoggedIn:g})}),Object(c.jsx)(d.b,{path:"/register",element:Object(c.jsx)(p,{})}),Object(c.jsx)(d.b,{path:"/dashboard",element:Object(c.jsx)(x,{loggedIn:b,children:Object(c.jsx)(u,{loggedIn:b,setLoggedIn:g})})})]})]})})}var m=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),r(e),i(e)}))};r.a.render(Object(c.jsx)(o.a,{children:Object(c.jsx)(g,{})}),document.getElementById("root")),m()}],[[20,1,2]]]);
//# sourceMappingURL=main.1f90a751.chunk.js.map