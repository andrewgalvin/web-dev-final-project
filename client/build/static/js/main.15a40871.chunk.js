(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,,,,,,function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(0),c=n(9),o=n.n(c),r=n(1),i=n.n(r),a=n(5),d=n(3),l=n(2);n(8),n(15);function j(e){return Object(s.jsx)("header",{children:Object(s.jsxs)("div",{className:"header__container",children:[Object(s.jsx)("h1",{children:"Daily Dashboard"}),Object(s.jsx)("nav",{className:"header__nav",children:Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{children:Object(s.jsx)(a.b,{to:"/",children:"Home"})}),!e.loggedIn&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("li",{children:Object(s.jsx)(a.b,{to:"/register",children:"Register"})})," ",Object(s.jsx)("li",{children:Object(s.jsx)(a.b,{to:"/login",children:"Login"})})]}),e.loggedIn&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("li",{children:Object(s.jsx)(a.b,{to:"/dashboard",children:"Dashboard"})}),Object(s.jsx)("li",{onClick:function(t){fetch("/api/user/session/remove",{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-cache"},credentials:"same-origin"}).then((function(e){return e.json().then((function(t){return{status:e.status,body:t}}))})).then((function(t){200===t.status&&e.setLoggedIn(!1)}))},children:Object(s.jsx)(a.b,{to:"/login",children:"Logout"})})]})]})})]})})}n(16);function b(e){return Object(s.jsx)("div",{className:"home",children:Object(s.jsxs)("div",{className:"home-title",children:[Object(s.jsx)("h1",{children:"Never lose track of your plans."}),Object(s.jsx)("p",{children:"Daily Dashboard monitors your local weather and keeps track of your todo-lists all in one place."}),Object(s.jsx)("div",{className:"home-title-btn",children:Object(s.jsx)(a.b,{to:"/register",children:Object(s.jsx)("button",{className:"home-btn",children:"Get Started Today"})})})]})})}n(17),n(18);function h(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)([]),a=Object(d.a)(i,2),l=a[0],j=a[1],b=Object(r.useState)([]),h=Object(d.a)(b,2),u=h[0],O=h[1],m=Object(r.useState)(!0),p=Object(d.a)(m,2),x=p[0],f=p[1];Object(r.useEffect)((function(){var e=!0;return navigator.geolocation.getCurrentPosition((function(e){o(e.coords.latitude),j(e.coords.longitude)})),fetch("https://api.openweathermap.org/data/2.5/weather/?lat=".concat(c,"&lon=").concat(l,"&units=metric&APPID=ed987e2716aae4a47523c9fb7aeb9abb")).then((function(e){return e.json()})).then((function(t){"400"!==t.cod&&"429"!==t.cod&&e&&(f(!1),O(t))})),function(){e=!1}}),[c,l]);var g;return Object(s.jsx)(s.Fragment,{children:!0===x?Object(s.jsx)("div",{children:Object(s.jsx)("h1",{children:"Click here to refresh. (Doesn't work yet)"})}):Object(s.jsx)("div",{className:"weather",children:"undefined"!==typeof u.main?Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"weather-city",children:[u.name,Object(s.jsx)("button",{className:"weather-refresh",onClick:function(e){e.preventDefault(),navigator.geolocation.getCurrentPosition((function(e){o(e.coords.latitude),j(e.coords.longitude)})),fetch("https://api.openweathermap.org/data/2.5/weather/?lat=".concat(c,"&lon=").concat(l,"&units=metric&APPID=ed987e2716aae4a47523c9fb7aeb9abb")).then((function(e){return e.json()})).then((function(e){"400"!==e.cod&&"429"!==e.cod&&(f(!1),O(e))}))},children:"Refresh"})]}),Object(s.jsxs)("div",{className:"weather-content",children:[Object(s.jsx)("p",{children:new Date(Date.now()).toDateString()}),Object(s.jsx)("p",{children:u.weather[0].description.charAt(0).toUpperCase()+u.weather[0].description.slice(1)})]}),Object(s.jsxs)("div",{className:"weather-content",children:[Object(s.jsxs)("p",{children:["Temprature: ",(g=u.main.temp,9*g/5+32).toFixed(2)," \u2109"]}),Object(s.jsxs)("p",{children:["Humidity: ",u.main.humidity,"%"]})]}),Object(s.jsxs)("div",{className:"weather-content",children:[Object(s.jsxs)("p",{children:["Sunrise:"," ",new Date(1e3*u.sys.sunrise).toLocaleTimeString("en-US")]}),Object(s.jsxs)("p",{children:["Sunset:"," ",new Date(1e3*u.sys.sunset).toLocaleTimeString("en-US")]})]})]}):Object(s.jsx)("div",{style:{padding:"20px 20px"},children:Object(s.jsx)("h4",{children:"Fetching local weather data..."})})})})}n(19);function u(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2),c=n[0],o=n[1];Object(r.useEffect)((function(){fetch("/api/user/todos",{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json().then((function(t){return{status:e.status,body:t}}))})).then((function(e){200===e.status?o(e.body.todos):alert(e.body.message)}))}),[]);return Object(s.jsxs)("div",{className:"todo",children:[Object(s.jsxs)("div",{className:"todo-title",children:[Object(s.jsx)("h5",{children:"Your Todo List"}),Object(s.jsxs)("div",{children:[Object(s.jsx)("input",{type:"text",name:"new-todo",className:"new-todo",id:"new-todo",placeholder:"Enter a new todo"}),Object(s.jsx)("button",{className:"new-todo-btn",onClick:function(e){e.preventDefault();var t=document.getElementById("new-todo").value;""!==t?fetch("/api/user/new/todo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({todo:t})}).then((function(e){return e.json().then((function(t){return{status:e.status,body:t}}))})).then((function(e){200===e.status?o(e.body.todos):alert(e.body.message)})):alert("Cannot add blank todo")},children:"Add"})]})]}),Object(s.jsx)("div",{className:"todo-list",children:c.length>0?c.map((function(e){return Object(s.jsxs)("div",{className:"todo-item",children:[Object(s.jsx)("p",{children:e.todo}),Object(s.jsx)("button",{className:"remove-todo-btn",onClick:function(t){return function(e){fetch("/api/user/remove/todo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e._id})}).then((function(e){return e.json().then((function(t){return{status:e.status,body:t}}))})).then((function(e){200===e.status?o(e.body.todos):alert(e.body.message)}))}(e)},children:"Remove"})]})})):Object(s.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(s.jsx)("p",{style:{fontWeight:"bold",marginTop:"20px",fontSize:"18px"},children:"No todos yet... add one to get started!"})})})]})}function O(e){return Object(s.jsxs)("div",{className:"dashboard",children:[Object(s.jsx)("article",{children:Object(s.jsx)("div",{className:"dashboard-weather",children:Object(s.jsx)(h,{})})}),Object(s.jsx)("article",{children:Object(s.jsx)("div",{className:"dashboard-todo-list",children:Object(s.jsx)(u,{})})})]})}n(20);function m(e){var t=Object(l.g)();return Object(s.jsx)("div",{className:"login",children:Object(s.jsx)("form",{onSubmit:function(n){n.preventDefault();var s=new FormData(n.currentTarget),c=s.get("email"),o=s.get("password");fetch("/api/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,password:o})}).then((function(e){return e.json().then((function(t){return{status:e.status,body:t}}))})).then((function(n){200===n.status?(e.setLoggedIn(!0),t("/dashboard")):alert(n.body.message)}))},children:Object(s.jsxs)("div",{className:"login-container",children:[Object(s.jsx)("h1",{children:Object(s.jsx)("span",{children:"Login"})}),Object(s.jsx)("p",{children:"Fill in the below form to login."}),Object(s.jsxs)("div",{className:"login-input",children:[Object(s.jsx)("label",{for:"email",children:Object(s.jsx)("b",{children:"Email"})}),Object(s.jsx)("input",{type:"text",placeholder:"Enter Email",name:"email",id:"email",required:!0}),Object(s.jsx)("label",{for:"password",children:Object(s.jsx)("b",{children:"Password"})}),Object(s.jsx)("input",{type:"password",placeholder:"Enter Password",name:"password",id:"password",required:!0}),Object(s.jsx)("button",{type:"submit",class:"loginbtn",children:"Login"})]})]})})})}n(21);function p(e){var t=Object(l.g)();return Object(s.jsx)("div",{className:"register",children:Object(s.jsx)("form",{onSubmit:function(e){e.preventDefault();var n=new FormData(e.currentTarget),s=n.get("email"),c=n.get("password"),o=n.get("confirm-password");if(String(s).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)){if(document.getElementById("email").style.border="none",c!==o)return document.getElementById("password").style.border="1px solid red",void(document.getElementById("confirm-password").style.border="1px solid red");document.getElementById("password").style.border="none",document.getElementById("confirm-password").style.border="none",fetch("/api/user/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:c})}).then((function(e){return e.json().then((function(t){return{status:e.status,body:t}}))})).then((function(e){200===e.status?(alert("Account created!"),t("/login")):401===e.status&&alert("Email taken.")}))}else document.getElementById("email").style.border="1px solid red"},children:Object(s.jsxs)("div",{className:"register-container",children:[Object(s.jsx)("h1",{children:Object(s.jsx)("span",{children:"Register"})}),Object(s.jsx)("p",{children:"Fill in the below form to register."}),Object(s.jsxs)("div",{className:"register-input",children:[Object(s.jsx)("label",{for:"email",children:Object(s.jsx)("b",{children:"Email"})}),Object(s.jsx)("input",{type:"text",placeholder:"Enter Email",name:"email",id:"email",required:!0}),Object(s.jsx)("label",{for:"password",children:Object(s.jsx)("b",{children:"Password"})}),Object(s.jsx)("input",{type:"password",placeholder:"Enter Password",name:"password",id:"password",required:!0}),Object(s.jsx)("label",{for:"confirm-password",children:Object(s.jsx)("b",{children:"Confirm Password"})}),Object(s.jsx)("input",{type:"password",placeholder:"Confirm Password",name:"confirm-password",id:"confirm-password",required:!0}),Object(s.jsx)("button",{type:"submit",class:"registerbtn",children:"Register"})]})]})})})}function x(e){var t=e.children,n=e.loggedIn,c=Object(l.f)();return n?t:Object(s.jsx)(l.a,{to:"/login",replace:!0,state:{path:c.pathname}})}function f(){var e=Object(r.useState)(!0),t=Object(d.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(!1),a=Object(d.a)(o,2),h=a[0],u=a[1];return Object(r.useEffect)((function(){fetch("/api/user/session",{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-cache"},credentials:"same-origin"}).then((function(e){return e.json().then((function(t){return{status:e.status,body:t}}))})).then((function(e){200===e.status?(u(!0),c(!n)):c(!n)}))}),[]),Object(s.jsx)(i.a.Fragment,{children:n?Object(s.jsx)(s.Fragment,{}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(j,{loggedIn:h,setLoggedIn:u}),Object(s.jsxs)(l.d,{children:[Object(s.jsx)(l.b,{path:"/",element:Object(s.jsx)(b,{})}),Object(s.jsx)(l.b,{path:"/login",element:Object(s.jsx)(m,{loggedIn:h,setLoggedIn:u})}),Object(s.jsx)(l.b,{path:"/register",element:Object(s.jsx)(p,{})}),Object(s.jsx)(l.b,{path:"/dashboard",element:Object(s.jsx)(x,{loggedIn:h,children:Object(s.jsx)(O,{loggedIn:h,setLoggedIn:u})})})]})]})})}var g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),s(e),c(e),o(e),r(e)}))};o.a.render(Object(s.jsx)(a.a,{children:Object(s.jsx)(f,{})}),document.getElementById("root")),g()}],[[22,1,2]]]);
//# sourceMappingURL=main.15a40871.chunk.js.map