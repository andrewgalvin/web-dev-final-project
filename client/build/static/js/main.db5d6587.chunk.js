(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n(9),c=n.n(r),i=n(1),a=n.n(i),o=n(4),l=n(5),j=n(2);n(8),n(15);function d(e){return Object(s.jsx)("header",{children:Object(s.jsxs)("div",{className:"header__container",children:[Object(s.jsx)("h1",{children:"Web Dev Final Project"}),Object(s.jsx)("nav",{className:"header__nav",children:Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{children:Object(s.jsx)(o.b,{to:"/",children:"Home"})}),!e.loggedIn&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("li",{children:Object(s.jsx)(o.b,{to:"/register",children:"Register"})})," ",Object(s.jsx)("li",{children:Object(s.jsx)(o.b,{to:"/login",children:"Login"})})]}),e.loggedIn&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("li",{children:Object(s.jsx)(o.b,{to:"/dashboard",children:"Dashboard"})}),Object(s.jsx)("li",{onClick:function(t){fetch("/api/user/session/remove",{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-cache"},credentials:"same-origin"}).then((function(e){return e.json().then((function(t){return{status:e.status,body:t}}))})).then((function(t){200===t.status&&e.setLoggedIn(!1)}))},children:Object(s.jsx)(o.b,{to:"/login",children:"Logout"})})]})]})})]})})}function b(e){return Object(s.jsx)("div",{children:Object(s.jsx)("h1",{children:"Home (Public)"})})}function h(e){return Object(s.jsx)("div",{children:Object(s.jsx)("h1",{children:"Dashboard (Private)"})})}n(16);function u(e){var t=Object(j.g)();return Object(s.jsx)("div",{className:"login",children:Object(s.jsx)("form",{onSubmit:function(n){n.preventDefault();var s=new FormData(n.currentTarget),r=s.get("email"),c=s.get("password");fetch("/api/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:c})}).then((function(e){return e.json().then((function(t){return{status:e.status,body:t}}))})).then((function(n){200===n.status&&(e.setLoggedIn(!0),t("/dashboard"))}))},children:Object(s.jsxs)("div",{className:"login-container",children:[Object(s.jsx)("h1",{children:Object(s.jsx)("span",{children:"Login"})}),Object(s.jsx)("p",{children:"Fill in the below form to login."}),Object(s.jsxs)("div",{className:"login-input",children:[Object(s.jsx)("label",{for:"email",children:Object(s.jsx)("b",{children:"Email"})}),Object(s.jsx)("input",{type:"text",placeholder:"Enter Email",name:"email",id:"email",required:!0}),Object(s.jsx)("label",{for:"password",children:Object(s.jsx)("b",{children:"Password"})}),Object(s.jsx)("input",{type:"password",placeholder:"Enter Password",name:"password",id:"password",required:!0}),Object(s.jsx)("button",{type:"submit",class:"loginbtn",children:"Login"})]})]})})})}n(17);function O(e){var t=Object(j.g)();return Object(s.jsx)("div",{className:"register",children:Object(s.jsx)("form",{onSubmit:function(e){e.preventDefault();var n=new FormData(e.currentTarget),s=n.get("email"),r=n.get("password");r!==n.get("confirm-password")?alert("Passwords do not match!"):fetch("/api/user/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:r})}).then((function(e){return e.json().then((function(t){return{status:e.status,body:t}}))})).then((function(e){200===e.status?(alert("Account created!"),t("/login")):401===e.status&&alert("Email taken.")}))},children:Object(s.jsxs)("div",{className:"register-container",children:[Object(s.jsx)("h1",{children:Object(s.jsx)("span",{children:"Register"})}),Object(s.jsx)("p",{children:"Fill in the below form to register."}),Object(s.jsxs)("div",{className:"register-input",children:[Object(s.jsx)("label",{for:"email",children:Object(s.jsx)("b",{children:"Email"})}),Object(s.jsx)("input",{type:"text",placeholder:"Enter Email",name:"email",id:"email",required:!0}),Object(s.jsx)("label",{for:"password",children:Object(s.jsx)("b",{children:"Password"})}),Object(s.jsx)("input",{type:"password",placeholder:"Enter Password",name:"password",id:"password",required:!0}),Object(s.jsx)("label",{for:"confirm-password",children:Object(s.jsx)("b",{children:"Confirm Password"})}),Object(s.jsx)("input",{type:"password",placeholder:"Confirm Password",name:"confirm-password",id:"confirm-password",required:!0}),Object(s.jsx)("button",{type:"submit",class:"registerbtn",children:"Register"})]})]})})})}function g(e){var t=e.children,n=e.loggedIn,r=Object(j.f)();return n?t:Object(s.jsx)(j.a,{to:"/login",replace:!0,state:{path:r.pathname}})}function p(){var e=Object(i.useState)(!0),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(i.useState)(!1),o=Object(l.a)(c,2),p=o[0],x=o[1];return Object(i.useEffect)((function(){fetch("/api/user/session",{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-cache"},credentials:"same-origin"}).then((function(e){return e.json().then((function(t){return{status:e.status,body:t}}))})).then((function(e){200===e.status?(x(!0),r(!n)):r(!n)}))}),[]),Object(s.jsxs)(a.a.Fragment,{children:[Object(s.jsx)(d,{loggedIn:p,setLoggedIn:x}),Object(s.jsxs)(j.d,{children:[Object(s.jsx)(j.b,{path:"/",element:Object(s.jsx)(b,{})}),Object(s.jsx)(j.b,{path:"/login",element:Object(s.jsx)(u,{loggedIn:p,setLoggedIn:x})}),Object(s.jsx)(j.b,{path:"/register",element:Object(s.jsx)(O,{})}),Object(s.jsx)(j.b,{path:"/dashboard",element:Object(s.jsx)(g,{loggedIn:p,children:Object(s.jsx)(h,{loggedIn:p,setLoggedIn:x})})})]})]})}var x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),s(e),r(e),c(e),i(e)}))};c.a.render(Object(s.jsx)(o.a,{children:Object(s.jsx)(p,{})}),document.getElementById("root")),x()},8:function(e,t,n){}},[[18,1,2]]]);
//# sourceMappingURL=main.db5d6587.chunk.js.map